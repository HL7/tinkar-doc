<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://docbook.org/xml/5.1/rng/docbookxi.rng" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="http://docbook.org/xml/5.1/sch/docbook.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1">
    <title>Example Implementation of Tinkar</title>
    <para>This section includes user documentation for an example implementation of the Terminology
        Knowledge Base standard, referred to as Komet (<link
            xlink:href="https://github.com/logicahealth/komet"/>), and how various terminologies,
        such as SNOMED CT<superscript>®</superscript>, LOINC<superscript>®</superscript>, RxNorm,
        and HL7 terminologies shall be reproducibly represented using the Terminology Knowledge Base
        standard. Using the Komet browser we can view the search Concepts, view the Concept details
        (Semantics), and navigate hierarchies, as well as many other functions that are outside the
        scope of this ballot.</para>
    <para>Java Reference Classes for the Tinkar model can be accessed here:(<link
        xlink:href="https://github.com/HL7/tinkar-java"/>).  C# Reference Classes
        can be accessed here:(<link
            xlink:href="https://github.com/HL7/tinkar-cs"/>).</para>
  <section>
      <title>Concept</title>
      <para>
          <figure>
              <title>Concept</title>
              <mediaobject>
                  <imageobject>
                      <imagedata fileref="Concept.png" scalefit="1" width="100%" contentdepth="100%"/>
                  </imageobject>
              </mediaobject>
              <caption>
                  <para><emphasis role="italics">Concept</emphasis>
                  </para>
              </caption>
          </figure>
      </para>
      <para>The image above represents the Concept “Acute pelvic pain” within the Komet Concept
            Detail panel. In this part of the Concept Detail Panel, no identifiers are displayed and
            they can only be accessed by right clicking and copying them. </para>
      <para>
          <figure>
              <title>Accessing Identifiers</title>
              <mediaobject>
                  <imageobject>
                      <imagedata fileref="IdentifierAccess.png" scalefit="1" width="100%" contentdepth="100%"/>
                  </imageobject>
              </mediaobject>
              <caption>
                  <para><emphasis role="italics">Accessing Identifiers</emphasis>
                    </para>
              </caption>
          </figure>
      </para>
        <para>While there is a name displayed for human readable purposes, all information
            describing the Concept is asserted with Semantics (see below). </para>
        <para>When viewing Concepts in Komet there are various icons that have different meanings
            based on certain Semantics that are associated with the Concept. </para>
      <para>
          <figure>
              <title>Concept Icons</title>
              <mediaobject>
                  <imageobject>
                      <imagedata fileref="Concept_Shapes.png" scalefit="1" width="100%" contentdepth="100%"/>
                  </imageobject>
              </mediaobject>
              <caption>
                  <para><emphasis role="italics">Concept Icons</emphasis>
                  </para>
              </caption>
          </figure>
      </para>
  </section>
    <section>
        <title>Semantic</title>
        <para>
            <figure>
                <title>Semantics</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="Semantics.png" scalefit="1" width="100%" contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">Semantics</emphasis>
                    </para>
                </caption>
            </figure>
        </para>
        <para>Semantics are the predicates and objects about a Concept. Semantics perform the
            descriptive work in Tinkar. ​ ​ Here, we see descriptions and axioms attached to the
            “Acute pelvic pain” Concept which add information specifying the Concept. ​ ​ A single
            instance of one of these Semantics is a SemanticVersion (with a STAMP). </para>
    </section>
    <section>
        <title>TypePattern</title>
        <para>Komet currently doesn't contain functionality to view and edit TypePatterns. Some
            examples of common patterns that are built into the tooling are:<itemizedlist>
                <listitem>
                    <para>STR TypePattern: This pattern is used to associate a String to a
                        Component. The type of association to a Component is represented by a Tinkar
                        Model Concept. In the example below the type of String is SNOMED
                            CT<superscript>®</superscript> integer ID.</para>
                    <figure>
                        <title>STR TypePattern</title>
                        <mediaobject>
                            <imageobject>
                                <imagedata fileref="STRPattern.png" scalefit="1" width="100%"
                                    contentdepth="100%"/>
                            </imageobject>
                        </mediaobject>
                        <caption>
                            <para><emphasis role="italics">STR TypePattern</emphasis>
                            </para>
                        </caption>
                    </figure>
                </listitem>
                <listitem>
                    <para>REF TypePattern: This pattern is used to associate a Concept to a
                        Component. The type of association is also represented by a Tinkar Model
                        Concept. In the example below the type of association is "SNOMED legacy
                        implication".</para>
                    <figure>
                        <title>REF TypePattern</title>
                        <mediaobject>
                            <imageobject>
                                <imagedata fileref="REFPattern.png" scalefit="1" width="100%"
                                    contentdepth="100%"/>
                            </imageobject>
                        </mediaobject>
                        <caption>
                            <para><emphasis role="italics">REF TypePattern</emphasis>
                            </para>
                        </caption>
                    </figure>
                </listitem>
                
            </itemizedlist></para>
    </section>
    <section>
      <title>Concept Detail</title>
      <para>Below we see the details for the LOINC<superscript>®</superscript> Concept Homocystine
            [Mass/time] in 24 hour Urine. You can see the LOINC<superscript>®</superscript> ID, data
            from the LOINC<superscript>®</superscript> table, Solor assigned Names, and
            relationships from the LOINC<superscript>®</superscript>- SNOMED
                CT<superscript>®</superscript> Cooperation Project. <figure>
                <title>Concept Details</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="concept_detail.png" scalefit="1" width="100%"
                            contentdepth="55%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">Concept Details</emphasis></para>
                </caption>
            </figure>
        </para>
      <para>In the following image we can see the latest STAMP information for the
                LOINC<superscript>®</superscript> Concept Homocystine [Mass/time] in 24 hour Urine. <figure>
                <title>STAMP</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="stamp.png" scalefit="1" width="100%" contentdepth="100%"
                        />
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">STAMP</emphasis></para>
                </caption>
            </figure>
        </para>
  </section>
    <section>
        <title>Navigator View</title>
        <para>In this example we see the results of combining the LOINC<superscript>®</superscript>-
            SNOMED CT<superscript>®</superscript> Cooperation Project module with the latest SNOMED
                CT<superscript>®</superscript> and LOINC<superscript>®</superscript> releases. You
            can then visualize and navigate the SNOMED CT<superscript>®</superscript> hierarchy and
            arrive at associated LOINC<superscript>®</superscript> codes that would be reached by
            the Urine homocystine measurement Concept. <figure>
                <title>Navigation View</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="navigation_example.png" scalefit="1" width="100%"
                            contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">Navigation View</emphasis></para>
                </caption>
            </figure>
        </para>
    </section>
  <section>
      <title>Versioning in Komet</title>
    <para>Representing all versions of components within Tinkar allows for the ability to view both
            Active and Inactive components and to compare the representations across time. The image
            below shows only the Active components for the Concept Fibromyalgia compared to all
            previous versions of Fibromyalgia over time. <figure>
                <title>Latest View with Active Status versus Latest View with Any Status</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="active_vs_inactive.png" scalefit="1" width="100%"
                            contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">Latest View with Active Status versus Latest View
                            with Any Status</emphasis></para>
                </caption>
            </figure>
        </para>
    <para>The image below shows the inferred definition marked as "1" that represents the most
            recent and active version of the Concept Definition. Below the current definition is the
            change history where each of the previous versions of Concept Definitions are
            represented. <figure>
                <title>Concept Definition History</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="definition_history.png" scalefit="1" width="100%"
                            contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">Concept Definition History</emphasis></para>
                </caption>
            </figure>
        </para>
  </section>
    <section>
        <title>SNOMED CT<superscript>®</superscript> Example</title>
        <para>
            <figure>
                <title>SNOMED CT<superscript>®</superscript> Concept</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="SNOMED_concept.png"  scalefit="1" width="100%" contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">SNOMED CT<superscript>®</superscript>
                            Concept</emphasis></para>
                </caption>
            </figure>
        </para>
        <para>
            <figure>
                <title>SNOMED CT<superscript>®</superscript> Descriptions</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="SNOMED_desc.png"  scalefit="1" width="100%" contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">SNOMED CT<superscript>®</superscript>
                            Descriptions</emphasis></para>
                </caption>
            </figure>
        </para>
        <para>
            <figure>
                <title>SNOMED CT<superscript>®</superscript>Relationships</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="SNOMED_rels.png"  scalefit="1" width="100%" contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">SNOMED CT<superscript>®</superscript>
                            Relationships</emphasis></para>
                </caption>
            </figure>
        </para>
    </section>
    <section>
        <title>LOINC<superscript>®</superscript> Example</title>
        <para>
            <figure>
                <title>LOINC<superscript>®</superscript> Concept</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="LOINC_concept.png"  scalefit="1" width="100%" contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">LOINC<superscript>®</superscript>
                            Concept</emphasis></para>
                </caption>
            </figure>
        </para>
        <para>
            <figure>
                <title>LOINC<superscript>®</superscript>Descriptions</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="LOINC_desc.png"  scalefit="1" width="100%" contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics"
                            >LOINC<superscript>®</superscript>Descriptions</emphasis></para>
                </caption>
            </figure>
        </para>
        <para>
            <figure>
                <title>LOINC<superscript>®</superscript>Inferred Relationships</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="LOINC_rels1.png"  scalefit="1" width="100%" contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">LOINC<superscript>®</superscript>Inferred
                            Relationships</emphasis></para>
                </caption>
            </figure>
            <figure>
                <title>LOINC<superscript>®</superscript> Stated Relationships</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="LOINC_rels2.png"  scalefit="1" width="100%" contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">LOINC<superscript>®</superscript>Stated
                            Relationships</emphasis></para>
                </caption>
            </figure>
        </para>
    </section>
    <section>
        <title>RxNorm Example</title>
        <para>
            <figure>
                <title>RxNorm Concept</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="RxNorm_concept.png"  scalefit="1" width="100%" contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">RxNorm Concept</emphasis></para>
                </caption>
            </figure>
        </para>
        <para>
            <figure>
                <title>RxNorm Descriptions</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="RxNorm_desc.png"  scalefit="1" width="100%" contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">RxNorm Descriptions</emphasis></para>
                </caption>
            </figure>
        </para>
        <para>
            <figure>
                <title>RxNorm Relationships</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="RxNorm_rels.png"  scalefit="1" width="100%" contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">RxNorm Relationships</emphasis></para>
                </caption>
            </figure>
        </para>
    </section>
    <section>
        <title>Equivalences between Modules</title>
        <para>Komet includes the capability to use a description logic classifier to create inferred
            views and detect equivalences and other errors. The following image shows the results of
            the classifier after merging the January 2021 version of the SNOMED
                CT<superscript>®</superscript> International release with the September 2020 version
            of the SNOMED CT<superscript>®</superscript> U.S. Edition. The classifier has detected
            that there is an equivalence between the Concepts: "Ankylosis of bilateral knee joints
            (disorder)" and "Ankylosis of both knee joints (disorder)".<figure>
                <title>Equivalencies Detected by Classifier</title>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="equivalents.png" scalefit="1" width="100%"
                            contentdepth="80%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">Equivalencies Detected by
                        Classifier</emphasis></para>
                </caption>
            </figure>
        </para>
        <para>We can then open two Concept Detail Panels and view the two Concepts side by side to
            understand the differences and similarities between the two Concepts, their origins, and
            understand how to correct the equivalencies between the two Concepts. In this case, the
            Concept "Ankylosis of bilateral knee joints (disorder)" would need to be retired as it
            belongs to the U.S. Edition and the "Ankylosis of both knee joints (disorder)" Concept
            is contained in the SNOMED CT<superscript>®</superscript> International Release. <figure>
                <title>SNOMED CT<superscript>®</superscript>Equivalences between Modules
                    <?oxy_comment_start author="rcholan" timestamp="20210320T111535-0400" comment="From Penni: I think this is backward the &quot;both&quot; is the US and the &quot;bilateral&quot; is the International core"?></title><?oxy_comment_end?>
                <mediaobject>
                    <imageobject>
                        <imagedata fileref="module_duplication.png" scalefit="1" width="100%"
                            contentdepth="100%"/>
                    </imageobject>
                </mediaobject>
                <caption>
                    <para><emphasis role="italics">SNOMED CT<superscript>®</superscript>
                            Equivalences between Modules</emphasis></para>
                </caption>
            </figure>
        </para>
    </section>
</chapter>
